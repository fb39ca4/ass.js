<!DOCTYPE html> 
<html>

<head>
<title>
svg generation test
</title>
</head>



<body>
  <div id="test" style="opacity:1">
  <br><br><br><br><br><br><br><br>Contrary to popular belief, Lorem Ipsum is not simply random text. It has roots in a piece of classical Latin literature from 45 BC<span id="testspan"></span>, making it over 2000 years old
  </div>
</body>
<script>
var test = document.getElementById("test");
var svg;
function createSVG(drawScale, drawCommands, fillColor, strokeColor, strokeWidth, blurRadius, testDiv) {
  /*var fillColor = "paleturquoise";
  var strokeColor = "#034EFF";
  var strokeWidth = 2.5;
  var blurRadius = 3.75;
  var drawScale = 2;*/
  var strokeWidthScaled = strokeWidth * 2 / drawScale;
  
  var svgns = "http://www.w3.org/2000/svg";
  var xlinkns = "http://www.w3.org/1999/xlink";

  var svg = document.createElementNS(svgns, "svg");
  svg.style.display = "inline";
  svg.style.overflow = "visible";
  
  var defs = document.createElementNS (svgns, "defs");
  svg.appendChild (defs);
  var g = document.createElementNS (svgns, "g");
  g.setAttributeNS(null, "fill-rule", "nonzero");
  svg.appendChild(g);
  
  var svgContainer = testDiv;
  svgContainer.appendChild(svg);
  
  var path = document.createElementNS(svgns, "path");
  path.setAttributeNS(null, "id", "path");
  path.setAttributeNS(null, 'd', drawCommands.toUpperCase());
  path.setAttributeNS(null, "transform", "scale(" + drawScale.toString() + ")");
  defs.appendChild(path);
  
  var testPath = document.createElementNS(svgns, "path");
  testPath.setAttributeNS(null, 'd', coords);
  g.appendChild(testPath);
  var bBox = testPath.getBBox();
  g.removeChild(testPath);
  bBoxScaled = {x:bBox.x * drawScale, y:bBox.y * drawScale, width:bBox.width * drawScale, height:bBox.height * drawScale};
  var filterEnlarge = blurRadius * 2 + strokeWidth;
  
  var blur = document.createElementNS(svgns, "filter");
  blur.setAttributeNS(null, "id", "blur");
  blur.setAttributeNS(null, "filterUnits", "userSpaceOnUse")
  blur.setAttributeNS(null, "y", bBoxScaled.y - filterEnlarge);
  blur.setAttributeNS(null, "x", bBoxScaled.x - filterEnlarge);
  blur.setAttributeNS(null, "height", bBoxScaled.height + 2 * filterEnlarge);
  blur.setAttributeNS(null, "width", bBoxScaled.width + 2 * filterEnlarge);
  defs.appendChild(blur);
  
  var gaussian = document.createElementNS(svgns, "feGaussianBlur");
  gaussian.setAttributeNS(null, "in", "SourceGraphic");
  gaussian.setAttributeNS(null, "stdDeviation", blurRadius);
  blur.appendChild(gaussian);
  
  if (strokeWidth > 0) {
    var stroke = document.createElementNS(svgns, "use");
    stroke.setAttributeNS(xlinkns, "xlink:href", "#path");
    stroke.setAttributeNS(null, "stroke", strokeColor);
    stroke.setAttributeNS(null, "fill", strokeColor);
    stroke.setAttributeNS(null, "stroke-width", strokeWidthScaled);
    stroke.setAttributeNS(null, "stroke-linejoin", "round");
    stroke.setAttributeNS(null, "stroke-linecap", "round");
    stroke.setAttributeNS(null, "filter", "url(#blur)");
    g.appendChild(stroke);
  }
  
  var fill = document.createElementNS(svgns, "use");
  fill.setAttributeNS(xlinkns, "xlink:href", "#path");
  fill.setAttributeNS(null, "fill-opacity", 1.0);
  fill.setAttributeNS(null, "fill", fillColor);
  if (strokeWidth <= 0) fill.setAttributeNS(null, "filter", "url(#blur)");
  g.appendChild(fill);
   
  svg.style.width = (bBoxScaled.x + bBoxScaled.width).toString() + "px";
  svg.style.height = (bBoxScaled.y + bBoxScaled.height).toString() + "px";
  
  svgContainer.removeChild(svg);
  return svg;
}
var coords = "m 0 0 l 2 0 l -6 -2 m -6 -2 l -4 -2 l -9 -5 m -9 -5 l -7 -5 l -13 -6 m -13 -6 l -11 -6 l -19 -8 m -19 -8 l -17 -8 l -19 -14 m -19 -14 l -17 -14 l -23 -16 m -23 -16 l -21 -16 l -26 -17 m -26 -17 l -24 -17 l -32 -21 m -32 -21 l -30 -21 l -38 -24 m -38 -24 l -36 -24 l -44 -25 m -44 -25 l -42 -25 l -49 -25 m -49 -25 l -47 -25 l -45 -30 m -45 -30 l -43 -30 l -51 -35 m -51 -35 l -49 -35 l -47 -35 m -47 -35 l -45 -35 l -42 -36 m -42 -36 l -40 -36 l -45 -38 m -45 -38 l -43 -38 l -51 -39 m -51 -39 l -49 -39 l -45 -40 m -45 -40 l -43 -40 l -45 -40 m -45 -40 l -43 -40 l -50 -40 m -50 -40 l -48 -40 l -53 -39 m -53 -39 l -51 -39 l -50 -39 m -50 -39 l -48 -39 l -47 -38 m -47 -38 l -45 -38 l -44 -44 m -44 -44 l -42 -44 l -43 -46 m -43 -46 l -41 -46 l -38 -47 m -38 -47 l -36 -47 l -35 -50 m -35 -50 l -33 -50 l -39 -51 m -39 -51 l -37 -51 l -36 -50 m -36 -50 l -34 -50 l -41 -50 m -41 -50 l -39 -50 l -46 -53 m -46 -53 l -44 -53 l -43 -52 m -43 -52 l -41 -52 l -37 -58 m -37 -58 l -35 -58 l -34 -61 m -34 -61 l -32 -61 l -38 -62 m -38 -62 l -36 -62 l -39 -63 m -39 -63 l -37 -63 l -39 -66 m -39 -66 l -37 -66 l -45 -65 m -45 -65 l -43 -65 l -43 -71 m -43 -71 l -41 -71 l -39 -76 m -39 -76 l -37 -76 l -45 -77 m -45 -77 l -43 -77 l -51 -82 m -51 -82 l -49 -82 l -51 -86 m -51 -86 l -49 -86 l -46 -87 m -46 -87 l -44 -87 l -43 -90 m -43 -90 l -41 -90 l -44 -90 m -44 -90 l -42 -90 l -38 -95 m -38 -95 l -36 -95 l -32 -94 m -32 -94 l -30 -94 l -37 -97 m -37 -97 l -35 -97 l -38 -97"
testspan.appendChild(createSVG(2.5, coords, "paleturquoise", "rgba(3, 78, 255, 1.0)", 2.5, 2.5, document.body));
</script>